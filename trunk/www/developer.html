<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <title>Exact computational linear algebra tools</title>
    <link rel="stylesheet" href="linbox.css" title="linbox" type="text/css">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="keywords" content="linear algebra computation, symbolic computation, exact computation, linbox, Smith form, GAP homology package, simplicial homology, Wiedemann, Lanczos">
    <meta name="description" content="Home page for project LinBox, a library for high-performance exact linear algebraic computations.">
	<link rel="icon" type="image/png" href="/favicon.png" >
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51318095-1', 'linalg.org');
  ga('send', 'pageview');

</script>
  </head>

  <body>
    <table border="0" cellpadding="4" cellspacing="0">
      <tr>
	<td colspan="2"><h1>Developer resources - Project LinBox</h1></td>
      </tr>

      <tr>
	<td id="LinksPart" valign="top">
	  <a href="index.html">Home</a><br>
	  <a href="overview.html">Overview</a><br>
	  <a href="news.html">News</a><br>
	  <a href="people.html">People</a><br>
	  <a href="download.html">Download</a><br>
	  <a href="docs.html">Documentation</a><br>
	  Developer<br>
	  <a href="links.html">Links</a><br>
	  <a href="support.html">Support</a><br>

	  <hr>

	  <a href="gap.html">GAP homology package</a><br>
	  <a href="maple-linbox.html">Maple-LinBox package</a><br>

	  <hr>

	  <a href="servers.html">Online computing servers</a><br>
	</td>

	<td id="MainPart" valign="top">
	  <p>
	    On this page are instructions for developers and those
	    wishing to contribute to LinBox. It is intended both for
	    the uninitiated and for the reference of existing
	    developers.
	  </p>

	  <h2>Table of Contents</h2>

	  <ol style="list-style: upper-roman;">
	    <li><a href="#compilation">Compilation and installation</a></li>
	    <li><a href="#layout">Basic layout</a></li>
	    <li><a href="#source">Subversion</a></li>
	    <li><a href="#standards">Coding standards</a></li>
	    <li><a href="#checklist">Checklist for adding files</a></li>
	    <li><a href="#website">Website maintenance</a></li>
	  </ol>

	  <a name="compilation"></a>
	  <h2>Compilation and installation</h2>

	  <p>
	  <p> See the <a href="http://www.linalg.org/linbox-html/index.html">documentation</a>.
	  Quick link to the <a href="http://www.linalg.org/linbox-html/install-dist.html">tarball</a> and
	  <a href="http://www.linalg.org/linbox-html/install-dev.html">subversion</a> installation notes.

	    If you are installing from Subversion, please continue reading
	    the instructions in the <a href="#source">section</a> below.
	  </p>

	  <a name="layout"></a>
	  <h2>Basic layout</h2>

	  <p>
	    LinBox is a template library, so installation requires
	    very little actual compilation. Nearly all of the library
	    is in header files. Directories in the source distribution
	    are as follows, relative to the tree's root:
	  </p>

	  <table class="DirectoryTable" border="0" cellpadding="4" cellspacing="0">
	    <tr>
	      <td><tt>doc/</tt></td>
	      <td>Documentation (see below)</td>
	    </tr>

	    <tr>
	      <td><tt>examples/</tt></td>
	      <td>Simple examples to help new users get started with the library</td>
	    </tr>

	    <tr>
	      <td><tt>interfaces/</tt></td>
	      <td>Interfaces to LinBox from other systems.
		At this writing there is a Maple interface.</td>
	    </tr>

	    <tr>
	      <td><tt>linbox/</tt></td>
	      <td>All library source (i.e. header files) goes here</td>
	    </tr>

	    <tr>
	      <td><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;algorithms/</tt></td>
	      <td>Specific algorithms</td>
	    </tr>

	    <tr>
	      <td><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blackbox/</tt></td>
	      <td>Black box (i.e. matrix) objects</td>
	    </tr>

	    <tr>
	      <td><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element/</tt></td>
	      <td>Objects representing field elements</td>
	    </tr>

	    <tr>
	      <td><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field/</tt></td>
	      <td>Objects representing fields (e.g. rationals, integers modulo p, etc.)</td>
	    </tr>

	    <tr>
	      <td><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;randiter/</tt></td>
	      <td>Random number generators</td>
	    </tr>

	    <tr>
	      <td><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;solutions/</tt></td>
	      <td>Easy-to-use interfaces for solutions to problems</td>
	    </tr>

	    <tr>
	      <td><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vector/</tt></td>
	      <td>Vector implementations</td>
	    </tr>

	    <tr>
	      <td><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;util/</tt></td>
	      <td>Utility routines that don't belong anywhere else</td>
	    </tr>

	    <tr>
	      <td><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gmp++/</tt></td>
	      <td>C++ source code for GMP integer wrapper</td>
	    </tr>

	    <tr>
	      <td><tt>test/</tt></td>
	      <td>Tests for library performance and correctness</td>
	    </tr>

	    <tr>
	      <td><tt>util/</tt></td>
	      <td>Scripts and other miscellaneous items, mostly for making library maintenance easier</td>
	    </tr>

	    <tr>
	      <td><tt>macros/</tt></td>
	      <td>Files to assist the build system</td>
	    </tr>

	  </table>

	  <p>
	    N.B. Though the doc/ directory contains some top-level and
	    tutorial documentation, reference documentation is stored
	    in parallel with the source code, under the src/ tree.
	  </p>

	  <a name="source"></a>
	  <h2>Subversion</h2>

	  <p>
	    LinBox is stored in a Subversion repository at the University of
	    Delaware. To access the latest bleeding edge copy of
	    LinBox from this source, you will need a working copy of
	    Subversion and all of the GNU development tools (e.g. autoconf,
	    automake, GNU make, and so on). To access Subversion:
	  </p>

	  <ol style="list-style: decimal;">
	    <li>
	      Make sure you have the necessary tools installed

	      <p>
		You will need <a href="http://subversion.tigris.org/">Subversion</a> installed.
		Also you will need to know how to do a svn login.
	      </p>

	      <p>
		You will need GNU Autoconf, GNU Automake, and GNU Libtool.
		Make sure the bin directories of these tools are in 
		your PATH, e.g. if you have
		Libtool installed in /usr/local/algebra/libtool, make
		sure /usr/local/algebra/libtool/bin is in your PATH.
	      </p>

	      <p>
		Also, if Automake is installed in a place separate
		from Autoconf, you will need to set the environment
		variable ACLOCAL_FLAGS to "-I &lt;automake
		prefix&gt;/share/aclocal", where &lt;prefix&gt; is the install
		prefix of Automake. Similarly, if Libtool is installed
		to a separate prefix, you should add "-I &lt;libtool
		prefix&gt;/share/aclocal" to ACLOCAL_FLAGS, where
		&lt;libtool prefix&gt; is the install prefix of Libtool.
	      </p>

	      <p>
		See <a
		href="http://www.gnu.org/software/autoconf/">http://www.gnu.org/software/autoconf/</a>
		for GNU Autoconf, <a
		href="http://www.gnu.org/software/automake/">http://www.gnu.org/software/automake/</a>
		for GNU Automake, and <a
		href="http://www.gnu.org/software/libtool/">http://www.gnu.org/software/libtool/</a>
		for GNU Libtool.
	      </p>

	      <p>
		GNU Autoconf, GNU Automake, and GNU Libtool are only
		required for checkouts from subversion.
		  But whether you are installing from a tarball release or from an svn revision, the packages on which LinBox depends will be needed: 
		the GNU multiprecision library (GMP), Givaro, fflas-ffpack, and a BLAS implementation, optionally NTL. 
	      </p>

	    </li>

	    <li>
	      Check out the LinBox project source code from the trunk of the repository

	      <p><tt>svn co svn://linalg.org/linalg/trunk/linbox/</tt></p>
	    </li>

	    <li>
	      Switch to the newly-created linbox directory and run the
	      script autogen.sh, optionally specifying the
	      installation prefix:

	      <p>
		<tt>
		  cd linbox<br>
		  ./autogen.sh [--prefix=&lt;prefix&gt;] [options]
		</tt>
	      </p>

	      <p>
		[options] include the following:
	      </p>

	      <table border="0" cellpadding="4" cellspacing="0">
		<tr>
		  <td><tt>--with-gmp=&lt;gmp-prefix&gt;</tt></td>
		  <td>Prefix of your GMP installation</td>
		</tr>

		<tr>
		  <td><tt>--with-blas=&lt;blas-prefix&gt;</tt></td>
		  <td>Prefix of your BLAS installation</td>
		  <td>There is an ATLAS variant.</td>
		</tr>

		<tr>
		  <td><tt>--with-givaro=&lt;givaro-prefix&gt;</tt></td>
		  <td>Prefix of your GIVARO installation</td>
		</tr>

		<tr>
		  <td><tt>--with-fflas-ffpack=&lt;fflas-ffpack-prefix&gt;</tt></td>
		  <td>Prefix of your FFLAS_FFPACK installation</td>
		</tr>

		<tr>
		  <td><tt>--with-ntl=&lt;ntl-prefix&gt;</tt></td>
		  <td>Prefix of your optional NTL installation</td>
		</tr>

		<tr>
		  <td><tt>--with-lapack=&lt;lapack-prefix&gt;</tt></td>
		  <td>Prefix of your optional LAPACK installation</td>
		</tr>
	      </table>

	      <p>
		For each package, this specification is needed only if the package is not installed at a standard location
		such as /usr or /usr/local.
		It is also necessary to set your LD_LIBRARY_PATH to support dynamic linking with the lib directory of any of the packages installed in a nonstandard place.
	      </p>
	    </li>

	    <li>
	      Install the library:

	      <p><tt>make install</tt></p>
	    </li>
	  </ol>

	  <p>
	    When you want to update your tree with the contents of
	    the LinBox Subversion repository, issue the following command
	    from the linbox/ directory:
	  </p>

	  <p><tt>svn up</tt></p>

	  <p>
	    You should receive some information on what files have
	    been updated. If any files have a "C" before them,
	    this means what you have conflicts with what is in the
	    repository. In other words, you made changes while
	    someone else made other changes and Subversion does not know
	    how to reconcile the two. You will need to edit that
	    file manually, looking for and fixing lines like
	  </p>

	  <pre>
<<<<<<<<<<<

===========

>>>>>>>>>>>
	  </pre>

	  <p>that show the sections that could not be reconciled.</p>

	  <p>
	    If you have made changes and would like to commit them to
	    the global repository, issue the command
	  </p>

	  <p><tt>svn ci [&lt;filename(s)&gt;]</tt></p>

	  <p>
	    The optional filename(s) argument specifies what you would
	    like to commit; the default is to commit everything that
	    has changed in the current directory and its
	    descendents. When you enter this command, a text editor
	    will come up prompting you for a log message. <b><i>ALWAYS
	    ENTER A LOG MESSAGE DESCRIBING WHAT YOU HAVE
	    CHANGED</i></b>. Failure to do so may result in your
	    changes being backed out by the administrator. When you
	    are done entering your message, simply save and exit the
	    text editor.
	  </p>

	  <p>
	    If you are not a main LinBox developer but would like to
	    submit some addition or modification, your code is
	    welcome. Please email a patch
        (use '<tt>svn diff</tt>' to form a patch)
        to us and we will consider including it.
        Or, even better, attach your patch to a ticket in
        <a href="http://linalg.org/projects/linalg/">our Trac database</a>.
	<!--
        <a href="http://linalg.org/projects/linalg/wiki">our wiki</a>.
	-->

	  </p>

	  <a name="standards"></a>
	  <h2>Coding standards</h2>

	  <ol style="list-style: decimal;">
	    <li>
	      Indentation style

	      <p>
		We use the Linux indentation style, i.e. K&amp;R with
		8-space indents. We would like to keep this standard,
		so please use it for any code submitted to the
		project. Here is an example:
	      </p>

	      <pre>
void myFunction (int a, int b, int c)
{
	int d;

	if (a == 0) {
		d = 1;
	}
	else if (a == 1) {
		d = 2;
		myOtherFunction (b, c);
	} else {
		d = 3;
	}
}

template &lt;class T&gt;
class MyClass : public MyOtherClass {
	int _b;

    public:
	MyClass (int a)
		: MyOtherClass (a), _b (0)
	{
	}
};
	      </pre>

	      <p>
		If you are using Emacs, then the text editor may
		automatically try to use its default GNU coding style
		when auto-indenting. <i>This yields code that is very
		hard to read.</i> To fix this problem, <i>all files in
		LinBox should start with the following line</i>:
	      </p>

	      <p><tt>/* -*- mode: C++; tab-width: 8; indent-tabs-mode: t; c-basic-offset: 8 -*- */</tt></p>

	      <p>
		Also, to make Emacs default to the more
		reader-friendly Linux indentation style, add the
		following to your <tt>~/.emacs</tt> file:
	      </p>

	      <pre>
(add-hook 'c-mode-common-hook
	  (lambda ()
	    (c-set-style "linux")
	    (c-set-offset 'access-label '/)
	    (c-set-offset 'inline-open 0)))
	      </pre>

	      <p>
		One more note: as stated below all LinBox files are
		declared in the namespace <tt>LinBox</tt>. This causes
		Emacs to indent all of the source code an extra
		level. We consider this to be excessive, so the
		preferred approach is to force Emacs not to indent for
		that namespace declaration. To do this, just go to the
		first few lines inside the namespace and pull them
		back to the first column. Emacs will follow that
		pattern from there on out.
	      </p>
	    </li>

	    <li>
	      Naming conventions

	      <p>
		We use Java/Smalltalk conventions for naming classes,
		methods, and variables. Classes whose names have
		several words have all the words juxtaposed without
		underscores, and each word has its first letter
		capitalized (e.g. <tt>MyClass</tt>,
		<tt>MyOtherClass</tt>). Methods are similar, except
		that the first letter of the first word is lower case
		(e.g. <tt>myMethod</tt>). Global constants should be
		all upper case with underscores between the words
		(e.g. <tt>MY_CONSTANT</tt>). In addition, variables
		that are members of classes should begin with an
		underscore to differentiate them from methods and
		parameters (e.g. <tt>int _myMember; int myMember ()
		const;</tt>).
	      </p>

	      <p>
		Directory and file names should be in lower case, with
		words separated by a hyphen ('-'),
		e.g. <tt>my-file.h</tt>
	      </p>

	      <p>
		We generally avoid abbreviations so as to avoid
		confusion among users of the library. However, some
		very commonly used features are abbreviated and some
		words commonly used together are treated as a single
		word. For example, we use "<tt>minpoly</tt>" rather
		than "<tt>MinimalPolynomial</tt>" and
		"<tt>Blackbox</tt>" rather than "<tt>BlackBox</tt>".
	      </p>
	    </li>

	    <li>
	      Miscellanae

	      <p>
		We put all of our declarations in the namespace
		LinBox. Please put the lines
	      </p>

	      <pre>
namespace LinBox
{

... // Your code here

}
	      </pre>

	      <p>
		in all header files of contributed code.
	      </p>

	      <p>
		All header files should have a set of preprocessor
		directives to prevent multiple inclusion. If your header
		file is named <tt>my-header-file.h</tt>, use
	      </p>

	      <pre>
#ifndef __LINBOX_my_header_file_H
#define __LINBOX_my_header_file_H

... // Your code here

#endif // __LINBOX_my_header_file_H
	      </pre>

	      <p>
		surrounding the whole file, except possibly any comments
		you have at the top.
	      </p>

	      <p>
		All files should contain a comment at the top indicating
		the file name, copyright, authors, and
		licensing. Additional documentation would be useful. You
		may use any of the files in this library as a template.
	      </p>
	      <p>
		Key objects must have documentation comments to be processed by doxygen in the creation of our online documentation system.  In the
              <a href="docs.html">reference manual</a>, see the section documenting doc itself for guidelines on these comments.
	      </p>
	    </li>
	  </ol>

	  <a name="licensing"></a>
	  <h2>Licensing</h2>

	  <p>
	    This code is licensed under the GNU Lesser General
	    Public License (see COPYING
	    for details); all contributed code should be similarly
	    licensed. We cannot accept any code that is released
	    under a license legally incompatible with the LGPL, so
	    please either license the code under the LGPL or
	    explicitly place it in the public domain if you are
	    unsure. Technically, code released without a license
	    at all and not explicitly placed in the public domain
	    is incompatible with the LGPL, so licensing it is
	    important.
	  </p>

	  <h3>Intellectual property</h3>

	  <p>
	    The original author of a program holds the copyright
	    to that program.  If another author changes the
	    program, the changes are copyrighted to that other
	    author provided that in the preamble a change is
	    announced and that the places where the changes are
	    made are annodated by the initials of the author and a
	    date.
	  </p>

	  <a name="checklist"></a>
	  <h2>Checklist for adding files</h2>

	  <p>
	    The procedure for adding a file is based on the type of
	    file being added.
	  </p>

	  <h3>Adding header files</h3>

	  <p>
	    In the text below &lt;filename&gt; refers to the file you are
	    adding and &lt;dir&gt; refers to the directory where the file
	    you are adding is located.
	  </p>

	  <ol style="list-style: decimal;">
	    <li>
	      Make sure the file has the correct format, with the
	      author's name and a copyright and license notice at the
	      file's top. Also make sure it follows coding standards
	      to the best of your ability.
	    </li>

	    <li>
	      Open <tt>&lt;dir&gt;/Makefile.am</tt> and locate the
	      list that starts with include_HEADERS. Add your file to
	      that list. If you add it to the end of the list, make
	      sure the preceding line ends with a backslash '/'.
	    </li>

	    <li>
            <p>
            For <strong>major</strong> changes only:
	        Add an entry to linbox/ChangeLog detailing the IDEAS
            that are different in LinBox's architecture or implementation as a result of your change.
            </p>
            <p>
            Small modifications, file renamings, and so on do not
            deserve entries in the ChangeLog -- details like that can be seen at
            <a href="http://linalg.org/projects/linalg"> the Trac site.</a>
            </p>
	    </li>

	    <li>
	      Run the command "<tt>svn add &lt;filename&gt;</tt>" from
	      the directory where the file is located.
	    </li>

	    <li>
	      Commit your changes with "<tt>svn ci</tt>", issued from
	      the linbox directory. Be sure to include a meaningful comment
          that summarizes the changes you have made!
	    </li>
	  </ol>

	  <h3>Adding a test</h3>

	  <p>
	    All tests should go in the directory <tt>tests</tt>. They should be
	    in the form of a standalone program that can run a
	    sensible test with no command line arguments, preferably
	    with a name prefixed by "test-". In the text below,
	    &lt;test&gt; refers to the name of your test binary,
	    e.g. <tt>test-minpoly</tt>. &lt;mod-test&gt; refers to the
	    result of replacing all "-" and "." characters in
	    &lt;test&gt; with an underscore "_". &lt;test-source&gt;
	    refers to the name of the source file; the procedure works
	    just as well if you have multiple source files. By
	    convention, the name of the source file should be
	    <tt>&lt;test&gt;.C</tt>
	  </p>

	  <ol style="list-style: decimal;">
	    <li>
	      As above, make sure the file has the correct format.
	    </li>

	    <li>
	      Open <tt>tests/Makefile.am</tt>. Add &lt;test&gt; to the
	      line that starts with "<tt>BASIC_TESTS = </tt>".
	    </li>

	    <li>
	      You will see a list of blocks that look like:

	      <pre>
test_sparse_matrix_SOURCES = 		\
	test-0-matrix.C			\
	test-common.C	test-common.h
	      </pre>

	      Below the last such block, add a block of the following form:

	      <pre>
&lt;mod-test&gt;_SOURCES = 		\
	&lt;test-source&gt;		\
	test-common.C	test-common.h
	      </pre>
	    </li>

	    <li>
	      Add the file to Subversion with "<tt>svn add &lt;test-source&gt;</tt>"
	    </li>

	    <li>
	      Commit your changes with "<tt>svn ci tests</tt>", issued
	      from the linbox directory. Again, include a meaningful log entry.
	    </li>
	  </ol>
	  <a name="website"></a>
	  <h2>Website maintenance</h2>

	  <ul>
	  <li>
	    To modify the website,
	      <p><tt>svn co svn://linalg.org/linalg/trunk/www/</tt></p>

		  Then make your changes and check them in to svn.
		  They automatically propagate to the public website.

	  <li> When updating the website, please also make an up-to-date version of the html
documentation.
		In a linbox installation, make the html docs and copy the linbox-html
		directory to the website.
			<ol>
				<li> cd &lt;path&gt;/linbox/doc
				<li> make docs
				<li> scp -R linbox-html linalg.org:/usa/www/usa/linbox/public_html
				<br>(Use your own linalg.org account pw.)
			</ol>
		<li> Google analytics is being tried.  Paste <tt>analyticstracking.html</tt> in each new html file header.
		</ul>
	</td>
      </tr>

      <tr>
	<td colspan="2" id="BottomPart">
	  <hr>

	  <a href="http://validator.w3.org/check/referer">
	    <img src="http://validator.w3.org/images/vh40"
		 alt="Valid HTML 4.0!">
	  </a>

	  <a href="http://jigsaw.w3.org/css-validator">
	    <img src="http://jigsaw.w3.org/css-validator/images/vcss.gif"
		 alt="Valid CSS!">
	  </a>

	  Comments? Bug reports? Please contact us at <a href="mailto:linbox-use@googlegroups.com">linbox-use@googlegroups.com</a><br>
	  This page's URL: <a href="http://www.linalg.org/developer.html">http://www.linalg.org/developer.html</a><br>
	  Page created: 4 August 2002<br>
	  Page last updated: 1 May 2007<br>
	</td>
      </tr>
    </table>
  </body>
</html>
